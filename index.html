<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نشر اعماق</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #182128;
            --secondary: #7a6538;
            --background: #d9d6b7;
            --light: #ffffff;
            --dark: #000000;
        }
        
        * {
            font-family: Vazir, Tahoma, sans-serif !important;
        }
        
        body {
            background-color: var(--background);
            color: var(--primary);
            line-height: 1.8;
            margin: 0;
            padding: 0;
        }
        
        /* هدر با لوگوی استاندارد */
        .navbar {
            background-color: var(--light) !important;
            border-bottom: 3px solid var(--secondary);
            padding: 8px 0;
        }
        
        .logo-container img {
            height: 40px;
            width: auto;
            max-width: 160px;
            object-fit: contain;
        }
        
        .nav-link {
            color: var(--primary) !important;
            font-weight: bold;
            margin: 0 8px;
            font-size: 0.95em;
            transition: color 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--secondary) !important;
        }
        
        /* بنر استاندارد - ریسپانسیو شده */
        .hero-banner {
            background: url('https://uploadkon.ir/uploads/520820_25new-slide.jpg') no-repeat center center;
            background-size: cover;
            min-height: 300px;
            width: 100%;
            position: relative;
        }
        
        /* اطمینان از نمایش کامل بنر در تمام اندازه‌ها */
        @media (max-width: 768px) {
            .hero-banner {
                min-height: 250px;
                background-attachment: scroll;
            }
        }
        
        @media (max-width: 576px) {
            .hero-banner {
                min-height: 200px;
            }
        }
        
        /* دکمه شناور */
        .floating-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: var(--secondary);
            color: var(--light);
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .floating-btn:hover {
            background: #69532e;
            transform: translateY(-3px);
            color: var(--light);
        }
        
        .btn-primary {
            background-color: var(--secondary);
            border-color: var(--secondary);
            padding: 10px 25px;
            font-weight: bold;
            font-size: 0.95em;
        }
        
        .btn-primary:hover {
            background-color: #69532e;
            border-color: #69532e;
        }
        
        .about-section {
            padding: 70px 0;
            background-color: var(--light);
        }
        
        .section-title {
            color: var(--primary);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 12px;
            margin-bottom: 35px;
            font-weight: bold;
            font-size: 1.8em;
        }
        
        .blog-section {
            padding: 70px 0;
        }
        
        .card {
            border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            transition: transform 0.3s ease;
            height: 100%;
            border-radius: 10px;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-img-top {
            height: 220px;
            object-fit: cover;
            width: 100%;
            border-radius: 10px 10px 0 0;
        }
        
        .card-body {
            padding: 20px;
        }
        
        .card-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .card-text {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }
        
        /* فرم با پس‌زمینه رنگ سازمانی */
        .form-section {
            padding: 70px 0;
            background-color: #f8f7e8;
        }
        
        .form-container {
            max-width: 650px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .form-control {
            border: 2px solid var(--primary);
            padding: 10px 12px;
            margin-bottom: 12px;
            background: var(--light);
            border-radius: 6px;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 0.2rem rgba(122, 101, 56, 0.15);
        }
        
        .required::after {
            content: " *";
            color: red;
        }
        
        .form-note {
            font-size: 0.8em;
            line-height: 1.4;
        }
        
        /* استایل‌های جدید برای پیشرفت آپلود */
        .upload-progress {
            display: none;
            margin-top: 10px;
        }
        
        .progress-bar {
            background-color: var(--secondary);
            height: 8px;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .upload-status {
            font-size: 0.8em;
            margin-top: 5px;
            text-align: center;
        }
        
        .file-info {
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
        }
        
        .footer {
            background-color: var(--primary);
            color: var(--background);
            padding: 35px 0;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .social-icons a {
            display: inline-block;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .social-icons a:hover {
            transform: scale(1.1);
            opacity: 0.8;
        }
        
        .social-icons img {
            width: 28px;
            height: 28px;
            display: block;
        }
        
        /* فرم جمع و جور */
        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .form-group {
            flex: 1;
        }
        
        .form-note {
            text-align: center;
            margin: 20px 0;
            padding: 0 10px;
        }
        
        .form-note p {
            margin: 0;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .hero-banner {
                min-height: 250px;
            }
            
            .floating-btn {
                left: 15px;
                bottom: 15px;
                padding: 10px 15px;
                font-size: 0.8em;
            }
            
            .logo-container img {
                height: 35px;
                max-width: 140px;
            }
            
            .section-title {
                font-size: 1.5em;
            }
            
            .about-section,
            .blog-section,
            .form-section {
                padding: 50px 0;
            }
            
            .card-img-top {
                height: 200px;
            }
        }
        
        @media (max-width: 576px) {
            .logo-container img {
                height: 32px;
                max-width: 120px;
            }
            
            .nav-link {
                font-size: 0.9em;
                margin: 0 5px;
            }
            
            .section-title {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <!-- دکمه شناور -->
    <a href="#form" class="floating-btn">
        ثبت درخواست بررسی اثر
    </a>

    <!-- هدر -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="https://uploadkon.ir/uploads/2bb820_25website-Logo.png" alt="نشر اعماق" class="logo-container" id="mainLogo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">خانه</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">درباره ما</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">تماس با ما</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- بنر استاندارد -->
    <section class="hero-banner"></section>

    <!-- درباره نشر -->
    <section class="about-section">
        <div class="container">
            <h2 class="section-title text-center">درباره نشر اعماق</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <p class="mb-4">نشر اعماق بیست و دوم مهرماه یک‌هزار و چهارصد و چهار زاده شد</p>
                    <p class="mb-4">نشر اعماق امکان زیستن است در عین نبودن</p>
                    <p class="fw-bold">شماره پروانه نشر: 19975</p>
                    <p class="text-muted">[...در حال به روزرسانی...]</p>
                </div>
            </div>
        </div>
    </section>

    <!-- مطالب -->
    <section class="blog-section">
        <div class="container">
            <h2 class="section-title text-center">آخرین مطالب</h2>
            <div class="row" id="blogPosts">
                <!-- پست‌ها به صورت داینامیک لود می‌شوند -->
            </div>
        </div>
    </section>

    <!-- فرم درخواست -->
    <section id="form" class="form-section">
        <div class="form-container">
            <h2 class="section-title text-center">فرم ثبت درخواست بررسی اثر</h2>
            <p class="text-center mb-4">از طریق این فرم اطلاعات درخواستی را ثبت کنید تا در اولین فرصت با شما تماس برقرار کنیم.</p>
            
            <form id="submissionForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">نام و نام خانوادگی</label>
                        <input type="text" class="form-control" id="fullName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label required">نام کتاب</label>
                        <input type="text" class="form-control" id="bookName" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label required">موضوع کتاب</label>
                    <input type="text" class="form-control" id="bookSubject" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">توضیح کوتاه درمورد کتاب</label>
                    <textarea class="form-control" id="bookDescription" rows="3"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">شماره تماس واتساپی <span class="form-note">(جلسه آنلاین)</span></label>
                        <input type="tel" class="form-control" id="whatsappNumber">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">ایمیل <span class="form-note">(جهت برگزاری جلسه آنلاین در Google Meet)</span></label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">بارگذاری فایل <span class="form-note">(حداکثر 10 مگابایت)</span></label>
                    <input type="file" class="form-control" id="bookFile" accept=".pdf,.doc,.docx" onchange="handleFileSelect(this)">
                    
                    <!-- بخش نمایش اطلاعات فایل و پیشرفت آپلود -->
                    <div class="file-info" id="fileInfo" style="display: none;"></div>
                    <div class="upload-progress" id="uploadProgress">
                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                        <div class="upload-status" id="uploadStatus">0%</div>
                    </div>
                    
                    <small class="text-muted form-note">درصورت تمایل برای پیشرفت سریع‌تر در فرآیند بررسی کتاب، می‌توانید چند صفحه از متن کتاب را بارگذاری کنید.</small>
                </div>
                
                <div class="form-note">
                    <p class="text-muted">بخش‌هایی که با ستاره نشانه‌گذاری شده‌اند را پر کنید و بعد درخواست خود را ارسال کنید.</p>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">ارسال درخواست</button>
            </form>
        </div>
    </section>

    <!-- فوتر -->
    <footer class="footer">
        <div class="container">
            <div class="social-icons">
                <a href="https://t.me/amaghpub" target="_blank">
                    <img src="https://uploadkon.ir/uploads/3db017_25Telegram.png" alt="تلگرام">
                </a>
                <a href="https://instagram.com/amaghpub" target="_blank">
                    <img src="https://uploadkon.ir/uploads/a43a17_25Instagram.png" alt="اینستاگرام">
                </a>
                <a href="https://www.linkedin.com/company/amaghpub" target="_blank">
                    <img src="https://uploadkon.ir/uploads/1f7217_25Linkedin.png" alt="لینکدین">
                </a>
                <a href="mailto:amagh.pub@gmail.com" target="_blank">
                    <img src="https://uploadkon.ir/uploads/547417_25Untitled-2.png" alt="ایمیل" style="width:28px;height:28px;">
                </a>
            </div>
            <p class="text-center mb-0" style="color:#d9d6b7 !important;">
                © تمامی حقوق محفوظ است | 
                <a href="index.html" style="color:#d9d6b7 !important; text-decoration:none !important;">نشر اعماق</a>
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // بارگذاری لوگوی سایت
        function loadSiteLogo() {
            const savedLogo = localStorage.getItem('currentSiteLogo') || 'https://uploadkon.ir/uploads/2bb820_25website-Logo.png';
            const logoElement = document.getElementById('mainLogo');
            if (logoElement) {
                logoElement.src = savedLogo;
            }
        }

        // لود پست‌های بلاگ
        function loadBlogPosts() {
            const posts = JSON.parse(localStorage.getItem('blogPosts')) || [
                {
                    id: 1,
                    title: "عنوان مطلب اول",
                    excerpt: "خلاصه‌ای از مطلب اول که کاربر را ترغیب به خواندن ادامه مطلب کند...",
                    image: "https://uploadkon.ir/uploads/c1d717_25Blogfa-Final.jpg",
                    date: "۱۴۰۳/۱۰/۱۵",
                    content: "<h2>این محتوای کامل مطلب اول است</h2><p>این یک پاراگراف نمونه از محتوای کامل مطلب است. این متن می‌تواند شامل اطلاعات مفید و جذاب برای خوانندگان باشد.</p><p>می‌توانید در اینجا مطالب بیشتری بنویسید و از تگ‌های HTML مختلف استفاده کنید.</p>"
                },
                {
                    id: 2,
                    title: "عنوان مطلب دوم",
                    excerpt: "خلاصه‌ای از مطلب دوم که کاربر را ترغیب به خواندن ادامه مطلب کند...",
                    image: "https://uploadkon.ir/uploads/c1d717_25Blogfa-Final.jpg",
                    date: "۱۴۰۳/۱۰/۱۰",
                    content: "<h2>این محتوای کامل مطلب دوم است</h2><p>این یک پاراگراف نمونه از محتوای کامل مطلب است. این متن می‌تواند شامل اطلاعات مفید و جذاب برای خوانندگان باشد.</p>"
                },
                {
                    id: 3,
                    title: "عنوان مطلب سوم",
                    excerpt: "خلاصه‌ای از مطلب سوم که کاربر را ترغیب به خواندن ادامه مطلب کند...",
                    image: "https://uploadkon.ir/uploads/c1d717_25Blogfa-Final.jpg",
                    date: "۱۴۰۳/۱۰/۰۵",
                    content: "<h2>این محتوای کامل مطلب سوم است</h2><p>این یک پاراگراف نمونه از محتوای کامل مطلب است. این متن می‌تواند شامل اطلاعات مفید و جذاب برای خوانندگان باشد.</p>"
                }
            ];

            const container = document.getElementById('blogPosts');
            container.innerHTML = '';

            posts.forEach(post => {
                container.innerHTML += `
                    <div class="col-md-4">
                        <div class="card">
                            <img src="${post.image}" class="card-img-top" alt="${post.title}">
                            <div class="card-body">
                                <h5 class="card-title">${post.title}</h5>
                                <p class="card-text">${post.excerpt}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">${post.date}</small>
                                    <button type="button" class="btn btn-primary" onclick="viewPost(${post.id})">ادامه مطلب</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // مشاهده پست کامل
        function viewPost(postId) {
            const posts = JSON.parse(localStorage.getItem('blogPosts')) || [];
            const post = posts.find(p => p.id === postId);
            
            if (post) {
                // ذخیره پست برای نمایش در صفحه جداگانه
                localStorage.setItem('currentPost', JSON.stringify(post));
                // باز کردن صفحه پست
                window.open('post.html', '_blank');
            } else {
                alert('پست مورد نظر یافت نشد.');
            }
        }

        // مدیریت انتخاب فایل
        function handleFileSelect(input) {
            const file = input.files[0];
            const fileInfo = document.getElementById('fileInfo');
            const uploadProgress = document.getElementById('uploadProgress');
            
            if (file) {
                // نمایش اطلاعات فایل
                const fileSize = (file.size / (1024 * 1024)).toFixed(2);
                fileInfo.innerHTML = `فایل انتخاب شده: ${file.name} (${fileSize} MB)`;
                fileInfo.style.display = 'block';
                
                // نمایش نوار پیشرفت
                uploadProgress.style.display = 'block';
            } else {
                fileInfo.style.display = 'none';
                uploadProgress.style.display = 'none';
            }
        }

        // شبیه‌سازی آپلود فایل با نوار پیشرفت
        function simulateFileUpload(callback) {
            const progressBar = document.getElementById('progressBar');
            const uploadStatus = document.getElementById('uploadStatus');
            const submitBtn = document.getElementById('submitBtn');
            
            // غیرفعال کردن دکمه ارسال
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> در حال آپلود...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    progressBar.style.width = '100%';
                    uploadStatus.textContent = '100% - آپلود کامل شد';
                    
                    // فعال کردن دکمه ارسال
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = 'ارسال درخواست';
                        callback(true);
                    }, 500);
                } else {
                    progressBar.style.width = progress + '%';
                    uploadStatus.textContent = Math.round(progress) + '% - در حال آپلود...';
                }
            }, 200);
        }

        // ارسال ایمیل
        function sendEmail(formData) {
            // در اینجا کد واقعی ارسال ایمیل قرار می‌گیرد
            // برای نمونه، فقط لاگ می‌کنیم
            console.log('ایمیل ارسال شد به: amagh.pub@gmail.com', formData);
            
            // شبیه‌سازی ارسال ایمیل
            setTimeout(() => {
                console.log('ایمیل با موفقیت ارسال شد');
            }, 1000);
        }

        // مدیریت فرم
        document.getElementById('submissionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const requiredFields = this.querySelectorAll('[required]');
            let valid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    valid = false;
                    field.style.borderColor = 'red';
                } else {
                    field.style.borderColor = '';
                }
            });
            
            if (valid) {
                const fileInput = document.getElementById('bookFile');
                
                if (fileInput.files.length > 0) {
                    // اگر فایل انتخاب شده، آپلود شبیه‌سازی می‌شود
                    simulateFileUpload((success) => {
                        if (success) {
                            saveSubmission();
                        }
                    });
                } else {
                    // اگر فایلی نیست، مستقیم ذخیره شود
                    saveSubmission();
                }
            } else {
                alert('لطفاً بخش‌های ستاره‌دار را پر کنید.');
            }
        });

        function saveSubmission() {
            const submissions = JSON.parse(localStorage.getItem('submissions')) || [];
            const fileInput = document.getElementById('bookFile');
            let fileName = '';
            let fileData = null;
            
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                fileName = file.name;
                
                // تبدیل فایل به Base64 برای ذخیره‌سازی
                const reader = new FileReader();
                reader.onload = function(e) {
                    fileData = e.target.result;
                    
                    const formData = {
                        id: Date.now(),
                        name: document.getElementById('fullName').value,
                        bookName: document.getElementById('bookName').value,
                        subject: document.getElementById('bookSubject').value,
                        description: document.getElementById('bookDescription').value,
                        phone: document.getElementById('whatsappNumber').value,
                        email: document.getElementById('email').value,
                        fileName: fileName,
                        fileData: fileData,
                        timestamp: new Date().toLocaleString('fa-IR'),
                        status: 'جدید'
                    };
                    
                    submissions.push(formData);
                    localStorage.setItem('submissions', JSON.stringify(submissions));
                    
                    // ارسال ایمیل
                    sendEmail(formData);
                    
                    alert('درخواست شما با موفقیت ثبت شد. به زودی با شما تماس خواهیم گرفت.');
                    document.getElementById('submissionForm').reset();
                    document.getElementById('fileInfo').style.display = 'none';
                    document.getElementById('uploadProgress').style.display = 'none';
                };
                reader.readAsDataURL(file);
            } else {
                const formData = {
                    id: Date.now(),
                    name: document.getElementById('fullName').value,
                    bookName: document.getElementById('bookName').value,
                    subject: document.getElementById('bookSubject').value,
                    description: document.getElementById('bookDescription').value,
                    phone: document.getElementById('whatsappNumber').value,
                    email: document.getElementById('email').value,
                    fileName: '',
                    fileData: null,
                    timestamp: new Date().toLocaleString('fa-IR'),
                    status: 'جدید'
                };
                
                submissions.push(formData);
                localStorage.setItem('submissions', JSON.stringify(submissions));
                
                // ارسال ایمیل
                sendEmail(formData);
                
                alert('درخواست شما با موفقیت ثبت شد. به زودی با شما تماس خواهیم گرفت.');
                this.reset();
            }
        }

        // بارگذاری اولیه
        document.addEventListener('DOMContentLoaded', function() {
            loadSiteLogo();
            loadBlogPosts();
        });
    </script>
</body>
</html>
